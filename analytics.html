<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9ENK2NHWBH"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-9ENK2NHWBH');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics - TN Road Safety Portal</title>
    <link href="css/styles.css" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&family=Noto+Sans+Tamil:wght@400;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#050505">
</head>

<body>

    <header>
        <div class="main-header">
            <div class="gov-branding">
                <img src="assets/emblem.png" alt="TN Government Emblem" class="tn-emblem">
                <div class="portal-title">
                    <h1 data-i18n="portal_title">Tamil Nadu Road Safety</h1>
                    <p>Analytics & Insights</p>
                </div>
            </div>
            <nav>
                <ul class="nav-list">
                    <li><a href="index.html" data-i18n="nav_home">Home</a></li>
                    <li><a href="analytics.html" class="active" data-i18n="nav_blackspots"
                            style="color:white; text-shadow: 0 0 10px rgba(255,255,255,0.5);">Analytics</a></li>
                    <li><a href="news.html" data-i18n="nav_rules">Updates</a></li>
                </ul>
            </nav>
            <div class="lang-switcher">
                <button id="lang-switch-btn" data-i18n="switch_lang">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>

            </div>
        </div>
    </header>

    <main class="container" style="padding-top: 120px;">

        <h2 class="section-title" data-i18n="analytics_title">Data & Safety Tools</h2>

        <!-- Fine Calculator (Moved from Index) -->
        <section id="fine-checker" class="container" style="margin-bottom: 60px;">
            <div class="fine-calculator-card">
                <h3 data-i18n="fine_title" style="margin-bottom: 20px; color: var(--neon-orange);">Traffic Fine Checker
                </h3>
                <p data-i18n="fine_desc" style="margin-bottom: 20px; color: var(--text-muted);">Select violation to
                    check penalty.</p>

                <div class="fine-form-grid">
                    <div class="form-group">
                        <label data-i18n="fine_sl_vehicle">Vehicle Type</label>
                        <select id="vehicleType">
                            <option value="bike" data-i18n="veh_bike">Two Wheeler</option>
                            <option value="car" data-i18n="veh_car">Four Wheeler</option>
                            <option value="heavy" data-i18n="veh_heavy">Heavy Vehicle</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="fine_sl_violation">Violation</label>
                        <select id="violationType">
                            <option value="helmet" data-i18n="vio_helmet">No Helmet</option>
                            <option value="seatbelt" data-i18n="vio_seatbelt">No Seatbelt</option>
                            <option value="overspeed" data-i18n="vio_overspeed">Over Speeding</option>
                            <option value="drunk" data-i18n="vio_drunk">Drunk Driving</option>
                            <option value="signal" data-i18n="vio_signal">Signal Jumping</option>
                            <option value="license" data-i18n="vio_license">No License</option>
                            <option value="insurance" data-i18n="vio_insurance">No Insurance</option>
                        </select>
                    </div>
                </div>

                <button onclick="checkFine()" class="btn-primary"
                    style="width: 100%; margin-top: 20px; border-color: var(--neon-orange); color: var(--neon-orange);"
                    data-i18n="fine_btn_check">Check Fine</button>

                <div id="fineResult" class="fine-result-box"
                    style="display: none; margin-top: 20px; padding: 15px; border-radius: 8px;">
                    <h4 data-i18n="fine_result_amount">Fine Amount:</h4>
                    <span id="fineAmountDisplay" style="font-size: 2rem; font-weight: bold;">‚Çπ0</span>
                    <p id="fineSafetyTip" style="font-size: 0.9rem; margin-top: 10px;">Safety Tip...</p>
                </div>
            </div>
        </section>

        <!-- Analytics Chart -->
        <section id="analytics" style="padding: 40px; border-radius: 20px; margin-bottom: 60px;">
            <h3 style="color: white; margin-bottom: 30px;">Accident Trends (2020-2025)</h3>
            <div style="max-width: 900px; margin: 0 auto;">
                <canvas id="safetyChart"></canvas>
            </div>
        </section>

    </main>

    <footer>
        <div class="container" style="text-align: center;">
            <p>Government of Tamil Nadu - Road Safety Mission</p>
        </div>
    </footer>

    <!-- SOS Button -->
    <div class="sos-container">
        <button class="sos-float-btn" onclick="toggleSOS()">
            <span style="font-size: 1.5rem;">üö®</span>
            <span data-i18n="sos_btn">SOS</span>
        </button>
        <div class="sos-popup" id="sosPopup">
            <a href="tel:108" class="sos-option ambulance">
                <span>üöë</span> <span data-i18n="sos_call_ambulance">Ambulance</span>
            </a>
            <a href="tel:100" class="sos-option police">
                <span>üöì</span> <span data-i18n="sos_call_police">Police</span>
            </a>
            <button class="sos-option location" onclick="shareLocation()">
                <span>üìç</span> <span data-i18n="sos_share_loc">Share Location</span>
            </button>
        </div>
    </div>


    <script src="js/translations.js"></script>
    <script src="js/main.js"></script>
</body>

</html>